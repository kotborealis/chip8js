<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chip8js</title>
    <link type="text/css" rel="stylesheet" href="index.css" media="screen,projection">
    <style>
        body{
            background: gray;
        }
    </style>
    <script src="src/CanvasManager.js"></script>
    <script src="src/PixelRender.js"></script>
    <script src="src/utils.js"></script>
    <script src="src/chip8.js"></script>
    <script src="src/chip8_keyboard.js"></script>
    <script src="src/chip8_speaker.js"></script>
    <script src="src/cirno.js"></script>
    <script src="dat.gui.min.js"></script>
</head>
<body>

</body>
<script>
    "use strict";
    const canvasManager = new CanvasManager("canvas",{fullscreen:false,width:640,height:320});
    const pixelRender = new PixelRender(canvasManager,{width:64,height:32});
    const cpu = new Chip8();
    const keyboard = new Chip8_keyboard(canvasManager);
    const speaker = new Chip8_speaker();
    cpu.screen = pixelRender;
    cpu.keyboard = keyboard;
    cpu.speaker = speaker;

    const cirno = new Cirno_BRIX(cpu);

    const ui={};
    ui.rom="BRIX";
    ui.start = ()=>{
        loadBinaryData("./roms/"+ui.rom,(buffer)=>{
            cpu.init(buffer);
            cpu.start();
        });
    }
    ui.reset = ()=>cpu.reset();
    ui.brix_bot = ()=>cirno.cycle();

    const gui = new dat.GUI();
    gui.add(ui,"rom",["BADFOOD","15PUZZLE","BLINKY","BLITZ","BRIX","CONNECT4","GUESS","HIDDEN","INVADERS","KALEID","MAZE","MERLIN","MISSILE","PONG","PONG2","PUZZLE","SYZYGY","TANK","TETRIS","TICTAC","UFO","VBRIX","VERS","WIPEOFF"]);
    gui.add(ui,"start");
    gui.add(cpu,"paused");
    gui.add(ui,"reset");
    gui.add(ui,"brix_bot");
</script>
</html>